@model Shopping.ViewModel.CartViewModel
<div class="container">
    <a asp-controller="Location" asp-action="LocationSaveOrder" asp-route-id="@Model.CartItem.Id">
        <input type="hidden" asp-for="CartItem.Id " />
   
        <input type="hidden" />
        <!-- Row 2: Shopping Cart -->
        <div class="row ">
            <div class="col-12">
                <h1 class="text-center">Shopping Cart</h1>

                @if (Model == null || Model.CartItems == null || !Model.CartItems.Any())
                {
                    <div class="alert alert-info mt-4">
                        Your shopping cart is empty.
                    </div>
                }
                else
                {
                    <table id="customers" class="table ">
                        <thead>
                            <tr>
                                <th scope="col">Product</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Price</th>
                                <th scope="col">Total</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var cartitem in Model.CartItems)
                            {
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            @if (cartitem.Product != null)
                                            {
                                                <img src="@cartitem.Product.ImageUrl" alt="Product Image" height="50" width="50" class="product-image mr-2" />
                                                <span>@cartitem.Product.Name</span>
                                            }
                                            else
                                            {
                                                <span>N/A</span>
                                            }
                                        </div>
                                    </td>
                                    <td class="quantity">
                                        <span>@cartitem.Quantity</span>
                                        
                                    </td>
                                    <td>@cartitem.Product?.Price.ToString("C")</td>
                                    <td>@(cartitem.Quantity * (cartitem.Product?.Price ?? 0))$</td>
                                    <td>
                                        <a asp-controller="Cart" asp-action="CartRemove" asp-route-id="@cartitem.Id" class="btn btn-danger">
                                            <i class="bi bi-trash-fill"></i> Remove
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="3"><strong>Total:</strong></td>
                                <td>@Model.CartItems.Sum(item => item.Quantity * (item.Product?.Price ?? 0)).ToString("C")</td>
                                <td>
                                    <button class="btn btn-primary" id="placeOrder">Place Your Location</button>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                }
            </div>
        </div>
    </a>
</div>

<script>
    // JavaScript code to handle quantity increment and decrement
    const quantityElements = document.querySelectorAll('.quantity');

    quantityElements.forEach((element) => {
        const incrementElement = element.querySelector('.quantity-increase');
        const decrementElement = element.querySelector('.quantity-decrease');
        const quantitySpan = element.querySelector('span');

        incrementElement.addEventListener('click', () => {
            const currentQuantity = parseInt(quantitySpan.innerText);
            quantitySpan.innerText = currentQuantity + 1;
        });

        decrementElement.addEventListener('click', () => {
            const currentQuantity = parseInt(quantitySpan.innerText);
            if (currentQuantity > 1) {
                quantitySpan.innerText = currentQuantity - 1;
            }
        });
    });
</script>
